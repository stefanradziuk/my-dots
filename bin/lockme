#!/usr/bin/env bash
# TODO use flags

# just lock with a static image
# i3lock --ignore-empty-password --no-unlock-indicator --image=/home/stefan/pictures/wallpapers/thonk.png

TMPBG='/tmp/screen.png'
# icon="/home/pathtoicon.png"

(( $# )) && { icon=$1; }

# take a screenshot
scrot "$TMPBG"

# # pixelate it
# convert "$TMPBG" -scale 10% -scale 1000% "$TMPBG"

# blur it
convert "$TMPBG" -blur 10x5 "$TMPBG"

# add an icon
# convert "$TMPBG" "$icon" -gravity center -composite -matte "$TMPBG"

# lock the screen
i3lock --ignore-empty-password --no-unlock-indicator --image="$TMPBG"

# remove the tmp file
rm "$TMPBG"
